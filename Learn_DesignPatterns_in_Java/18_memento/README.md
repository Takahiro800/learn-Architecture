# Memento パターン
- 状態を保存する
- エディタのundo, redoのように状態を元に戻したりするのに使う

# 登場人物
## Originator
- 自分の現在の状態を保存したいときにMemento役を作る。
- 以前のMemento役を渡されると、それを作った時点の状態に戻る処理を行う

## Memento
- Originator役の内部情報をまとめる
- 内部情報を持っているが、誰にでも後悔するわけではない
- ２種類のインターフェースを持っている
  - wide interface
    - 扱う範囲が広い。状態を再現するために必要な情報が全て得られるメソッドの集合。これを支えるのはOriginatoのみ
  - narrow interface
    - 外部に見せるもの。
    - 内部状態が外部に公開されるのを防ぐ
## Caretaker
- Originatorの状態を保存するときに、そのことをMementoに伝える
- サンプルコードではmain.rb
- narrow interfaceのみが扱える。
  - つまり、作ったもらったMemento役を、ひとかたまりのブラックボックスとして保存しておくだけ

# 考えを広げるためのヒント
## Caretaker役とOriginator役を分けることの意味
- Caretaker
  - どのタイミングでスナップショットを撮るかを決める
  - いつアンドゥするかを決める
  - Mementoを保持する
- Originator
  - Mementoを作る
  - 与えられたMemento役を使って自分の状態を戻す

このように役割分担しておけば、
- 複数ステップのundoを行うように変更したい
- undoするだけでなく、現在の状態をファイルに保存したい
という修正を行うときにも、Originator役を変更する必要がない

# 関連しているパターン
## Command
- 命令を処理する場合に、Mementoパターンを使ってundo,redoをする場合がある

## Prototype
- Mementoパターンでは、スナップショットとundoのため、現在のインスタンスの状態を保存する
- 保存するのは、復元のために必要な情報のみ

- Prototypeパターンでは、現在のインスタンスと同じ状態の別のインスタンスを作成する
## State
- Mementoパターンは、状態をインスタンスで表現する
- Stateパターンは、クラスが「状態」を表現する
